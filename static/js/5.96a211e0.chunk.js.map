{"version":3,"sources":["components/Dialogs/InputMessage/InputMessage.module.css","components/Dialogs/SidebarMessage/SidebarMessage.module.css","components/Dialogs/Dialog/Dialog.jsx","components/Dialogs/Dialog/DialogContainer.jsx","components/Dialogs/InputMessage/InputMessage.jsx","components/Dialogs/Dialog/DialogMessage/SelfDialogMessage.jsx","components/Dialogs/Dialog/DialogMessage/DialogMessage.jsx","components/Dialogs/SidebarMessage/SidebarMessage.jsx","components/Dialogs/SidebarMessage/SidebarMessageContainer.js","state/selectors/dialogsSelector.js","components/Dialogs/InputMessage/InputMessageContainer.jsx","components/Dialogs/Dialogs.jsx","components/HOC/WithAuthRedirect.js","components/Dialogs/DialogsContainer.jsx","components/Dialogs/Dialog/DialogMessage/DialogMessage.module.css","components/Dialogs/Dialogs.module.css","components/Dialogs/Dialog/Dialog.module.css"],"names":["module","exports","Dialog","props","className","style","content","dialogMessages","DialogContainer","InputMessageForm","onSubmit","data","sendMessage","messageText","selectedId","render","handleSubmit","component","name","styles","textarea","placeholder","autoFocus","send_button","InputMessage","input","SelfDialogMessage","message","self","photo","src","alt","activeClassName","active","to","DialogMessage","href","SidebarMessage","onClick","selectDialog","id","scrollDown","link","connect","dispatch","setTimeout","blockToScroll","document","querySelector","scrollTop","scrollHeight","getSelectedDialog","state","dialogs","selected","getSidebarMessages","createSelector","messages","map","index","getDialogMessages","dialog","selectedID","InputMessageContainer","sendMessageAC","Dialogs","match","params","sidebar","noId","sidebarMessages","exact","path","wrapper","store","inputMessage","mapStateToProps","isAuthorized","getAuthorizeInfo","WithAuthRedirect","Component","compose","withRouter"],"mappings":"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","file":"static/js/5.96a211e0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"InputMessage_input__2qw-p\",\"textarea\":\"InputMessage_textarea__1BQ3p\",\"send_button\":\"InputMessage_send_button__2lOME\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"SidebarMessage_message__24W9N\",\"name\":\"SidebarMessage_name__1kC6Z\",\"content\":\"SidebarMessage_content__1E4Ek\",\"active\":\"SidebarMessage_active__cXwKE\",\"link\":\"SidebarMessage_link__2Kbk5\"};","import React from 'react';\r\nimport style from './Dialog.module.css';\r\n\r\n\r\nconst Dialog = (props) => {\r\n  return (\r\n    <div className={`${style.content} scroll_down`}>\r\n      {props.dialogMessages}\r\n    </div>\r\n  );\r\n};\r\nexport default Dialog;","import React from 'react';\r\nimport Dialog from './Dialog';\r\n\r\n\r\nconst DialogContainer = (props) => {\r\n  \r\n  return <Dialog dialogMessages={props.dialogMessages}/>;\r\n};\r\n\r\nexport default DialogContainer;","import React from 'react';\r\nimport styles from './InputMessage.module.css';\r\nimport {Form, Field} from 'react-final-form';\r\n\r\n\r\nconst InputMessageForm = props => {\r\n  \r\n  const onSubmit = data => {\r\n    debugger\r\n    props.sendMessage(data.messageText,props.selectedId);\r\n    data.messageText = '';\r\n  };\r\n  \r\n  return <Form onSubmit={onSubmit} render={({handleSubmit}) => (\r\n    <form onSubmit={handleSubmit}>\r\n      <Field component='textarea' name='messageText' className={styles.textarea} placeholder=\"Say something...\"\r\n             autoFocus/>\r\n      <button className={styles.send_button}>send</button>\r\n    </form>\r\n  )}/>;\r\n};\r\n\r\n\r\nconst InputMessage = (props) => {\r\n  return (\r\n    <div className={styles.input}>\r\n      <InputMessageForm selectedId={props.selectedId} sendMessage={props.sendMessage}/>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default InputMessage;","import React from 'react';\r\nimport styles from './DialogMessage.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\nimport style from './DialogMessage.module.css';\r\n\r\nconst SelfDialogMessage = (props) => {\r\n  return (\r\n    <div className={`${styles.message} ${styles.self}`}>\r\n      <div className={style.photo}>\r\n        <img src={props.photo} alt=\"\"/>\r\n      </div>\r\n      <div className={styles.name}>\r\n        <NavLink activeClassName={styles.active} className={styles.name} to=\"/profile\">\r\n          You\r\n        </NavLink>\r\n      </div>\r\n      <div className={styles.content}>\r\n        {props.message}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelfDialogMessage;","import React from 'react';\r\nimport style from './DialogMessage.module.css';\r\n\r\nconst DialogMessage = (props) => {\r\n  return (\r\n    <div className={style.message}>\r\n      <div className={style.photo}>\r\n        <img src={props.photo} alt=\"\"/>\r\n      </div>\r\n      <div className={style.name}>\r\n        <a className={style.name} href=\"#\">\r\n          {props.name}\r\n        </a>\r\n      </div>\r\n      <div className={style.content}>\r\n        {props.message}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default DialogMessage;\r\n","import React from 'react';\r\nimport styles from './SidebarMessage.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst SidebarMessage = (props) => {\r\n  const selectDialog = () =>{\r\n    props.selectDialog(props.id)\r\n    props.scrollDown()\r\n  }\r\n  \r\n  return (\r\n    <NavLink onClick={selectDialog} activeClassName={styles.active} className={styles.link}\r\n             to={`/dialogs/id${props.id}`}>\r\n      <div className={styles.message}>\r\n        <div className={styles.name}>\r\n          {props.name}\r\n        </div>\r\n        <div className={styles.content}>\r\n          {props.content}\r\n        </div>\r\n      </div>\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default SidebarMessage;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport SidebarMessage from './SidebarMessage';\r\nimport {selectDialog} from '../../../state/dialogsReducer';\r\n\r\nconst SidebarMessageContainer = (props) => {\r\n  return <SidebarMessage {...props}/>;\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    selectDialog(id) {\r\n      dispatch(selectDialog(id));\r\n    },\r\n    scrollDown(){\r\n      setTimeout(()=>{\r\n        const blockToScroll = document.querySelector('.scroll_down');\r\n        blockToScroll.scrollTop = blockToScroll.scrollHeight + 100;\r\n      },1)\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(SidebarMessageContainer);","import {createSelector} from 'reselect';\r\nimport SelfDialogMessage from '../../components/Dialogs/Dialog/DialogMessage/SelfDialogMessage';\r\nimport DialogMessage from '../../components/Dialogs/Dialog/DialogMessage/DialogMessage';\r\nimport SidebarMessageContainer from '../../components/Dialogs/SidebarMessage/SidebarMessageContainer';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nexport const getStateDialogMessages = state => state.dialogs.dialog.dialogMessages;\r\n\r\nexport const getInputMessage = state => state.dialogs.inputMessage;\r\n\r\nconst getMessages = state => state.dialogs.messages;\r\n\r\nexport const getSelectedDialog = state => state.dialogs.selected;\r\n\r\nexport const getSidebarMessages = createSelector(getMessages, (messages)=>{\r\n  return messages.map((message,index) => {\r\n    return <SidebarMessageContainer key={index} name={message.name} content={message.content} id={message.id}/>;\r\n  });\r\n})\r\n\r\n\r\nexport const getDialogMessages = createSelector(getStateDialogMessages,getSelectedDialog,\r\n  (dialog,selectedID)=>{\r\n  if (!selectedID)\r\n    return <Redirect to='/dialogs'/>\r\n  return dialog['id'+selectedID].map((message,index) => {\r\n    if (message.name === 'Self') {\r\n      return <SelfDialogMessage key={index} photo={message.photo} message={message.content}/>;\r\n    } else {\r\n      return <DialogMessage key={index} photo={message.photo} name={message.name} message={message.content}/>;\r\n    }\r\n  });\r\n})","import React from 'react';\r\nimport {sendMessageAC} from '../../../state/dialogsReducer';\r\nimport InputMessage from './InputMessage';\r\nimport {connect} from 'react-redux';\r\nimport {getSelectedDialog} from '../../../state/selectors/dialogsSelector';\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    selectedId:getSelectedDialog(state)\r\n  }\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    sendMessage(messageText,id) {\r\n      dispatch(sendMessageAC(messageText,id));\r\n    },\r\n  };\r\n};\r\n\r\nconst InputMessageContainer = connect(mapStateToProps, mapDispatchToProps)(InputMessage);\r\n\r\n\r\nexport default InputMessageContainer;","import React from 'react';\r\nimport styles from './Dialogs.module.css';\r\nimport DialogContainer from './Dialog/DialogContainer';\r\nimport InputMessageContainer from './InputMessage/InputMessageContainer';\r\nimport {Route} from 'react-router-dom';\r\n\r\n\r\nconst Dialogs = (props) => {\r\n  const className = ()=>{\r\n    if (props.match.params.id){\r\n      return styles.sidebar\r\n    }\r\n    return `${styles.sidebar} ${styles.noId}`\r\n  }\r\n  return (\r\n    <div className={styles.dialogs}>\r\n      <div className={className()}>\r\n        {props.sidebarMessages}\r\n      </div>\r\n      <Route exact path={`/dialogs/${props.match.params.id}`}>\r\n        <div className={styles.wrapper}>\r\n          <DialogContainer id={props.match.params.id} dialogMessages={props.dialogMessages}/>\r\n          <InputMessageContainer store={props.store} inputMessage={props.inputMessage}/>\r\n        </div>\r\n      </Route>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {getAuthorizeInfo} from '../../state/selectors/authPageSelector';\r\n\r\nconst mapStateToProps = state =>{\r\n  return{\r\n    isAuthorized: getAuthorizeInfo(state),\r\n  }\r\n}\r\n\r\nconst WithAuthRedirect = (Component) => {\r\n  const RedirectComponent = props => {\r\n    if (!props.isAuthorized)\r\n      return <Redirect to='/auth'/>;\r\n    return <Component {...props}/>;\r\n  };\r\n  \r\n  \r\n  return connect(mapStateToProps)(RedirectComponent)\r\n};\r\n\r\nexport default WithAuthRedirect;\r\n","import React from 'react';\r\nimport Dialogs from './Dialogs';\r\nimport {connect} from 'react-redux';\r\nimport WithAuthRedirect from '../HOC/WithAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {getDialogMessages, getSidebarMessages} from '../../state/selectors/dialogsSelector';\r\nimport {withRouter} from 'react-router';\r\n\r\n\r\nconst DialogsContainer = (props) => {\r\n  return <Dialogs {...props}/>\r\n};\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    sidebarMessages: getSidebarMessages(state),\r\n    dialogMessages: getDialogMessages(state),\r\n  };\r\n};\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    scrollDown() {\r\n      const blockToScroll = document.querySelector('.scroll_down');\r\n      blockToScroll.scrollTop = blockToScroll.scrollHeight + 100;\r\n    }\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  withRouter,\r\n  WithAuthRedirect\r\n)(DialogsContainer)","// extracted by mini-css-extract-plugin\nmodule.exports = {\"self\":\"DialogMessage_self__1jXL7\",\"content\":\"DialogMessage_content__1SeR5\",\"photo\":\"DialogMessage_photo__3Caz2\",\"name\":\"DialogMessage_name__6pmua\",\"message\":\"DialogMessage_message__3L2_a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__2XDdn\",\"sidebar\":\"Dialogs_sidebar__3WmjQ\",\"wrapper\":\"Dialogs_wrapper__3oej6\",\"noId\":\"Dialogs_noId__26mi3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Dialog_content__691tp\"};"],"sourceRoot":""}