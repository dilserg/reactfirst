(this.webpackJsonpreactfirst=this.webpackJsonpreactfirst||[]).push([[1],{14:function(t,e,n){"use strict";e.a=n.p+"static/media/Male.b580cf11.png"},15:function(t,e,n){t.exports={nav:"Menu_nav__2zdEo",item:"Menu_item__m5enj",active:"Menu_active__L4aZa"}},18:function(t,e,n){"use strict";n.d(e,"g",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return h})),n.d(e,"c",(function(){return j})),n.d(e,"h",(function(){return g}));var r=n(4),a=n.n(r),o=n(7),c=n(22),i=n(2),u=n(14),s=n(6),l={info:{personInfo:{id:null,name:null,aboutMe:null,photo:u.a},lookingForAJob:!1,lookingForAJobDescription:null,contacts:{github:null,vk:null,facebook:null,instagram:null,twitter:null,youtube:null,mainLink:null},status:""},posts:{postsData:[],postInputText:""},isFetching:!1};e.b=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD-POST":var r=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date;t=Object(i.a)({},e);var o=n.postText.trim();return o&&(t.posts={postsData:[{name:n.name,date:"".concat(a.getDate()," ").concat(r[a.getMonth()]," ").concat(a.getFullYear()," ").concat(a.getHours(),":").concat(a.getMinutes()),content:o,likesCount:0,photo:u.a}].concat(Object(c.a)(e.posts.postsData)),postInputText:""}),t;case"SET-PROFILE":return(t=Object(i.a)({},e)).info=Object(i.a)(Object(i.a)({},e.info),{},{personInfo:Object(i.a)(Object(i.a)({},e.info.personInfo),{},{name:n.data.fullName,photo:n.data.photos.large,aboutMe:n.data.aboutMe}),lookingForAJob:n.data.lookingForAJob,lookingForAJobDescription:n.data.lookingForAJobDescription,contacts:Object(i.a)(Object(i.a)({},e.info.contacts),{},{github:n.data.contacts.github,vk:n.data.contacts.vk,facebook:n.data.contacts.facebook,instagram:n.data.contacts.instagram,twitter:n.data.contacts.twitter,youtube:n.data.contacts.youtube,mainLink:n.data.contacts.mainLink})}),t;case"TOGGLE-PROFILE-FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:n.isFetching});case"SET-STATUS":return Object(i.a)(Object(i.a)({},e),{},{info:Object(i.a)(Object(i.a)({},e.info),{},{status:n.status})});case"SET-NEW-PHOTO":return Object(i.a)(Object(i.a)({},e),{},{info:{personInfo:{photo:n.photo}}});default:return e}};var d=function(t){return{type:"SET-PROFILE",data:t}},f=function(t,e){return{type:"ADD-POST",postText:t,name:e}},b=function(t){return{type:"TOGGLE-PROFILE-FETCHING",isFetching:t}},O=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b(!0)),e.next=3,s.a.getProfile(t);case 3:(r=e.sent).data&&(n(d(r.data)),n(b(!1)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getStatus(t);case 2:r=e.sent,n({type:"SET-STATUS",status:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(t){s.a.setNewStatus(t)},j=function(t){var e={userId:t.id,aboutMe:t.aboutMe,lookingForAJob:Boolean(+t.isLookingForJob),lookingForAJobDescription:t.job,fullName:t.name,contacts:{github:t.github&&"github.com/"+t.github,vk:t.vk&&"vk.com/"+t.vk,facebook:t.facebook&&"facebook.com/"+t.facebook,instagram:t.instagram&&"instagram.com/"+t.instagram,twitter:t.twitter&&"twitter.com/"+t.twitter,youtube:t.youtube&&"youtube.com/"+t.youtube,mainLink:t.mainLink}};s.a.editPage(e)},g=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.uploadPhoto(t);case 2:0===(r=e.sent).data.resultCode&&n({type:"SET-NEW-PHOTO",photo:r.data.data.photos.small});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return i}));var r=function(t){return t.auth.isAuthorized},a=function(t){return t.auth.id},o=function(t){return t.auth.isFetching},c=function(t){return t.auth.hasError},i=function(t){return t.auth.login}},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return O}));var r=n(4),a=n.n(r),o=n(7),c=n(2),i=n(6),u={id:null,login:null,email:null,isAuthorized:!1,isFetching:!1,hasError:!1},s=function(t){return{type:"HAS-ERROR",error:t}},l=function(t,e,n){return{type:"SET-USER-DATA",data:{id:t,email:e,login:n}}},d=function(t){return{type:"TOGGLE-FETCHING",isFetching:t}},f=function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.authMe();case 2:return n=t.sent,r=n.data.data,t.abrupt("return",e(l(r.id,r.email,r.login)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d(!0)),e.next=3,i.a.authLogin(t);case 3:if(0!==(r=e.sent).data.resultCode){e.next=14;break}return e.next=7,i.a.authMe();case 7:r=e.sent,o=r.data.data,n(l(o.id,o.email,o.login)),n(s(!1)),n(d(!1)),e.next=16;break;case 14:n(s(!0)),n(d(!1));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d(!0)),t.next=3,i.a.LogOut();case 3:0===t.sent.data.resultCode&&e({type:"LOG-OUT"}),e(d(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOG-OUT":return Object(c.a)(Object(c.a)({},t),{},{isAuthorized:!1});case"SET-USER-DATA":return e.data.id?Object(c.a)(Object(c.a)(Object(c.a)({},t),e.data),{},{isAuthorized:!0}):Object(c.a)({},t);case"HAS-ERROR":return Object(c.a)(Object(c.a)({},t),{},{hasError:e.error});case"TOGGLE-FETCHING":return Object(c.a)(Object(c.a)({},t),{},{isFetching:e.isFetching});default:return t}}},23:function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"h",(function(){return b})),n.d(e,"d",(function(){return O})),n.d(e,"g",(function(){return p})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return j})),n.d(e,"e",(function(){return g})),n.d(e,"c",(function(){return m})),n.d(e,"k",(function(){return v})),n.d(e,"b",(function(){return x}));var r=n(4),a=n.n(r),o=n(7),c=n(22),i=n(2),u=n(6),s={users:[],selectedPage:1,usersOnOnePage:10,isFetching:!1,usersInFollowingProgress:[]};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FOLLOW":return Object(i.a)(Object(i.a)({},t),{},{users:t.users.map((function(t){return t.id===e.id?Object(i.a)(Object(i.a)({},t),{},{followed:!0}):t}))});case"UNFOLLOW":return Object(i.a)(Object(i.a)({},t),{},{users:t.users.map((function(t){return t.id===e.id?Object(i.a)(Object(i.a)({},t),{},{followed:!1}):t}))});case"SET-USERS":return Object(i.a)(Object(i.a)({},t),{},{users:e.users});case"GET-TOTAL-COUNT":return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalUsersCount});case"SELECT-PAGE":return Object(i.a)(Object(i.a)({},t),{},{selectedPage:e.page});case"TOGGLE-FETCH":return Object(i.a)(Object(i.a)({},t),{},{isFetching:!e.isFetching});case"TOGGLE-FOLLOWING-PROGRESS":return Object(i.a)(Object(i.a)({},t),{},{usersInFollowingProgress:e.isFollowingProgress?[].concat(Object(c.a)(t.usersInFollowingProgress),[e.id]):t.usersInFollowingProgress.filter((function(t){return t!==e.id}))});case"TO-FIRST-PAGE":return Object(i.a)(Object(i.a)({},t),{},{selectedPage:1});default:return t}};var l=function(){return{type:"TO-FIRST-PAGE"}},d=function(t){return{type:"FOLLOW",id:t}},f=function(t){return{type:"UNFOLLOW",id:t}},b=function(t){return{type:"SET-USERS",users:t}},O=function(t){return{type:"GET-TOTAL-COUNT",totalUsersCount:t}},p=function(t){return{type:"SELECT-PAGE",page:t}},h=function(t){return{type:"TOGGLE-FETCH",isFetching:t}},j=function(t,e){return{type:"TOGGLE-FOLLOWING-PROGRESS",isFollowingProgress:t,id:e}},g=function(t,e){return function(){var n=Object(o.a)(a.a.mark((function n(r){var o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(h(!1)),n.next=3,u.a.getUsers(t,e);case 3:o=n.sent,r(h(!0)),r(b(o.data.items));case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},m=function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h(!1)),t.next=3,u.a.getCount();case 3:n=t.sent,e(O(n.data.totalCount)),e(h(!0));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(j(!0,t)),e.next=3,u.a.unfollow(t);case 3:0===e.sent.data.resultCode&&n(f(t)),n(j(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(j(!0,t)),e.next=3,u.a.follow(t);case 3:0===e.sent.data.resultCode&&n(d(t)),n(j(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},28:function(t,e,n){t.exports={header:"Header_header__3Y5Su",login:"Header_login__2BSyI",content:"Header_content__5d2tU"}},29:function(t,e,n){"use strict";var r=n(1),a=(n(0),n(53)),o=n.n(a);e.a=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:o.a.lds_roller,children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})})}},46:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return s}));var r=n(35),a=function(t){return t.allUsers.usersOnOnePage},o=Object(r.a)((function(t){return t.allUsers.totalUsersCount}),a,(function(t,e){for(var n=[],r=Math.ceil(t/e),a=1;a<=r;a++)n.push(a);return n})),c=function(t){return t.allUsers.usersInFollowingProgress},i=function(t){return t.allUsers.users},u=function(t){return t.allUsers.selectedPage},s=function(t){return t.allUsers.isFetching}},47:function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var r=n(22),a=n(2),o=n(14),c=n.p+"static/media/Female.cd03b322.png",i={messages:[{id:1,name:"Nadezhda",content:"Hello"},{id:2,name:"Ivan",content:"Hello"},{id:3,name:"Alexey",content:"Hello"},{id:4,name:"Ekaterina",content:"Hello"}],dialog:{dialogMessages:[{name:"Nadezhda",content:"hello,friend!",photo:c},{name:"Self",content:"Hello!",photo:o.a},{name:"Nadezhda",content:"hello,friend!",photo:c},{name:"Self",content:"Hello!",photo:o.a},{name:"Nadezhda",content:"hello,friend!",photo:c},{name:"Self",content:"Hello!",photo:o.a},{name:"Nadezhda",content:"hello,friend!",photo:c},{name:"Self",content:"Hello!",photo:o.a},{name:"Nadezhda",content:"hello,friend!",photo:c},{name:"Self",content:"Hello!",photo:o.a}]}},u=function(t){return{type:"SEND-MESSAGE",messageText:t}};e.a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments.length>1?arguments[1]:void 0,c=document.querySelector(".scroll_down");switch(n.type){case"SEND-MESSAGE":(t=Object(a.a)({},e)).dialog.dialogMessages=Object(r.a)(e.dialog.dialogMessages);var u=n.messageText.trim();return u&&t.dialog.dialogMessages.push({name:"Self",content:u,photo:o.a}),setTimeout((function(){c.scrollTop=c.scrollHeight+100}),1),t;case"SCROLL-DOWN":setTimeout((function(){c.scrollTop=c.scrollHeight+100}),1);break;default:return e}}},53:function(t,e,n){t.exports={lds_roller:"Preloader_lds_roller__36G_u"}},54:function(t,e,n){t.exports={preloader:"WithSuspense_preloader__1htcf"}},59:function(t,e,n){},6:function(t,e,n){"use strict";var r=n(2),a=n(48),o=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f3a0a3ec-dd9a-48c6-8dde-c7a136542315"}}),c={getUsers:function(t,e){return o.get("users?page=".concat(t,"&count=").concat(e))},getCount:function(){return o.get("users")},unfollow:function(t){return o.delete("follow/".concat(t))},follow:function(t){return o.post("follow/".concat(t))},getProfile:function(t){return o.get("profile/".concat(t))},authMe:function(){return o.get("auth/me")},getStatus:function(t){return o.get("profile/status/".concat(t))},setNewStatus:function(t){return o.put("profile/status",{status:t})},authLogin:function(t){return o.post("auth/login",{email:t.email,password:t.password,rememberMe:t.rememberMe})},LogOut:function(){return o.delete("auth/login")},editPage:function(t){return o.put("profile",Object(r.a)({},t))},uploadPhoto:function(t){var e=new FormData;return e.append("image",t),o.put("profile/photo",e)}};e.a=c},83:function(t,e,n){},88:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(0),o=n.n(a),c=(n(59),function(t){t&&t instanceof Function&&n.e(9).then(n.bind(null,108)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),o(t),c(t)}))}),i=n(16),u=n(18),s=n(47),l=n(23),d=n(20),f=n(49),b=n(4),O=n.n(b),p=n(7),h=n(2),j={isInitialized:!1},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INITIALIZE":return Object(h.a)(Object(h.a)({},t),{},{isInitialized:!0});default:return t}},m=Object(i.c)({profile:u.b,dialogs:s.a,allUsers:l.a,auth:d.b,app:g}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,x=Object(i.e)(m,v(Object(i.a)(f.a)));window.store=x;var E=x,T=n(26),w=n.n(T),F=n(51),S=n(52),y=n(56),P=n(55),k=(n(83),n(13)),L=n(5),N=n(28),I=n.n(N),A=n.p+"static/media/twitter.0efd0e85.svg",C=function(t){return Object(r.jsx)("header",{className:I.a.header,children:Object(r.jsxs)("div",{className:I.a.content,children:[Object(r.jsx)(k.b,{to:"/",children:Object(r.jsx)("img",{src:A,alt:""})}),Object(r.jsx)("div",{className:I.a.login,children:"/auth"===t.path||function(){if(t.login){if(t.isFetching)return;return Object(r.jsx)(k.b,{onClick:t.logOut,to:"/auth",children:"Log out"})}return Object(r.jsx)(k.b,{to:"/auth",children:"Login"})}()})]})})},_=n(17),G=n(19),M={getProfile:u.d,logOut:d.d},U=Object(i.d)(L.f,Object(_.b)((function(t){return{login:Object(G.e)(t),isFetching:Object(G.a)(t)}}),M))((function(t){return Object(r.jsx)(C,{logOut:t.logOut,getProfile:t.getProfile,login:t.login,path:t.location.pathname,isFetching:t.isFetching})})),H=n(15),z=n.n(H),D=function(t){return Object(r.jsx)("nav",{className:z.a.nav,children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:t.isAuthorized?Object(r.jsx)(k.b,{exact:!0,onClick:t.loadProfile,activeClassName:z.a.active,className:z.a.item,to:"/profile",children:"Profile"}):Object(r.jsx)(k.b,{to:"/auth",className:z.a.item,children:"Profile"})}),Object(r.jsx)("li",{children:Object(r.jsx)(k.b,{activeClassName:z.a.active,className:z.a.item,to:"/dialogs",children:"Messages"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:z.a.item,href:"#",children:"Friends"})}),Object(r.jsx)("li",{children:Object(r.jsx)(k.b,{onClick:t.toFirstPage,activeClassName:z.a.active,className:z.a.item,to:"/users",children:"Users"})})]})})},R=n(46),J={goToFirstPage:l.f,getUsers:l.e,getProfile:u.d,getStatus:u.e},W=Object(_.b)((function(t){return{id:Object(G.d)(t),isAuthorized:Object(G.b)(t),usersOnOnePage:Object(R.f)(t)}}),J)((function(t){return Object(r.jsx)(D,Object(h.a)({loadProfile:function(){t.getStatus(t.id),t.getProfile(t.id)},toFirstPage:function(){t.goToFirstPage(),t.getUsers(1,t.usersOnOnePage)}},t))})),B=n(29),Y=n(54),Z=n.n(Y),X=function(t){return function(e){return Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)("div",{className:Z.a.preloader,children:Object(r.jsx)(B.a,{})}),children:Object(r.jsx)(t,Object(h.a)({},e))})}},q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,110))})),K=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,113))})),V=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,112))})),Q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,109))})),$=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,111))})),tt=function(t){Object(y.a)(n,t);var e=Object(P.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeMe()}},{key:"render",value:function(){return Object(r.jsxs)(k.a,{children:[Object(r.jsx)(U,{}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(W,{}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(L.b,{exact:!0,path:"/",render:X(Q)}),Object(r.jsx)(L.b,{path:"/profile/:id?",render:X(Q)}),Object(r.jsx)(L.b,{path:"/dialogs",render:X(q)}),Object(r.jsx)(L.b,{path:"/users",render:X(V)}),Object(r.jsx)(L.b,{path:"/auth",render:X($)}),Object(r.jsx)(L.b,{path:"/edit",render:X(K)})]})]})]})}}]),n}(a.Component),et=Object(_.b)((function(t){return{isInitialized:t.app.isInitialized}}),{initializeMe:function(){return function(){var t=Object(p.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(d.a)());case 2:e({type:"INITIALIZE"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(tt);w.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(_.a,{store:E,children:Object(r.jsx)(et,{})})}),document.getElementById("root")),c()}},[[88,2,3]]]);
//# sourceMappingURL=main.2a1a81d4.chunk.js.map