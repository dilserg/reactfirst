(this.webpackJsonpreactfirst=this.webpackJsonpreactfirst||[]).push([[1],{14:function(e,t,n){"use strict";t.a=n.p+"static/media/Male.b580cf11.png"},15:function(e,t,n){e.exports={nav:"Menu_nav__2zdEo",item:"Menu_item__m5enj",active:"Menu_active__L4aZa"}},18:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return p}));var r=n(4),a=n.n(r),c=n(8),i=n(22),o=n(2),u=n(14),s=n(6),l={info:{personInfo:{id:null,name:null,photo:u.a},status:""},posts:{postsData:[],postInputText:""},isFetching:!1};t.b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD-POST":var r=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date;e=Object(o.a)({},t);var c=n.postText.trim();return c&&(e.posts={postsData:[{name:n.name,date:"".concat(a.getDate()," ").concat(r[a.getMonth()]," ").concat(a.getFullYear()," ").concat(a.getHours(),":").concat(a.getMinutes()),content:c,likesCount:0,photo:u.a}].concat(Object(i.a)(t.posts.postsData)),postInputText:""}),e;case"SET-PROFILE":return(e=Object(o.a)({},t)).info.personInfo=Object(o.a)(Object(o.a)({},t.info.personInfo),{},{name:n.data.fullName,photo:n.data.photos.large}),e;case"TOGGLE-PROFILE-FETCHING":return Object(o.a)(Object(o.a)({},t),{},{isFetching:n.isFetching});case"SET-STATUS":return Object(o.a)(Object(o.a)({},t),{},{info:Object(o.a)(Object(o.a)({},t.info),{},{status:n.status})});default:return t}};var d=function(e){return{type:"SET-PROFILE",data:e}},f=function(e,t){return{type:"ADD-POST",postText:e,name:t}},O=function(e){return{type:"TOGGLE-PROFILE-FETCHING",isFetching:e}},b=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O(!0)),t.next=3,s.a.getProfile(e);case 3:(r=t.sent).data&&(n(d(r.data)),n(O(!1)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getStatus(e);case 2:r=t.sent,n({type:"SET-STATUS",status:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){s.a.setNewStatus(e)},p=function(e){var t={userId:e.id,lookingForAJob:Boolean(+e.isLookingForJob),lookingForAJobDescription:e.job,fullName:e.name,contacts:{github:e.github,vk:e.vk,facebook:e.facebook,instagram:e.instagram,twitter:e.twitter,youtube:e.youtube,mainLink:e.mainLink}};s.a.editPage(t)}},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o}));var r=function(e){return e.auth.isAuthorized},a=function(e){return e.auth.id},c=function(e){return e.auth.isFetching},i=function(e){return e.auth.hasError},o=function(e){return e.auth.login}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return b}));var r=n(4),a=n.n(r),c=n(8),i=n(2),o=n(6),u={id:null,login:null,email:null,isAuthorized:!1,isFetching:!1,hasError:!1},s=function(e){return{type:"HAS-ERROR",error:e}},l=function(e,t,n){return{type:"SET-USER-DATA",data:{id:e,email:t,login:n}}},d=function(e){return{type:"TOGGLE-FETCHING",isFetching:e}},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.authMe();case 2:return n=e.sent,r=n.data.data,e.abrupt("return",t(l(r.id,r.email,r.login)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(d(!0)),t.next=3,o.a.authLogin(e);case 3:if(0!==(r=t.sent).data.resultCode){t.next=14;break}return t.next=7,o.a.authMe();case 7:r=t.sent,c=r.data.data,n(l(c.id,c.email,c.login)),n(s(!1)),n(d(!1)),t.next=16;break;case 14:n(s(!0)),n(d(!1));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(!0)),e.next=3,o.a.LogOut();case 3:0===e.sent.data.resultCode&&t({type:"LOG-OUT"}),t(d(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG-OUT":return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1});case"SET-USER-DATA":return t.data.id?Object(i.a)(Object(i.a)(Object(i.a)({},e),t.data),{},{isAuthorized:!0}):Object(i.a)({},e);case"HAS-ERROR":return Object(i.a)(Object(i.a)({},e),{},{hasError:t.error});case"TOGGLE-FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});default:return e}}},23:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return O})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return j})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return x}));var r=n(4),a=n.n(r),c=n(8),i=n(22),o=n(2),u=n(6),s={users:[],selectedPage:1,usersOnOnePage:10,isFetching:!1,usersInFollowingProgress:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case"GET-TOTAL-COUNT":return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"SELECT-PAGE":return Object(o.a)(Object(o.a)({},e),{},{selectedPage:t.page});case"TOGGLE-FETCH":return Object(o.a)(Object(o.a)({},e),{},{isFetching:!t.isFetching});case"TOGGLE-FOLLOWING-PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{usersInFollowingProgress:t.isFollowingProgress?[].concat(Object(i.a)(e.usersInFollowingProgress),[t.id]):e.usersInFollowingProgress.filter((function(e){return e!==t.id}))});case"TO-FIRST-PAGE":return Object(o.a)(Object(o.a)({},e),{},{selectedPage:1});default:return e}};var l=function(){return{type:"TO-FIRST-PAGE"}},d=function(e){return{type:"FOLLOW",id:e}},f=function(e){return{type:"UNFOLLOW",id:e}},O=function(e){return{type:"SET-USERS",users:e}},b=function(e){return{type:"GET-TOTAL-COUNT",totalUsersCount:e}},j=function(e){return{type:"SELECT-PAGE",page:e}},h=function(e){return{type:"TOGGLE-FETCH",isFetching:e}},p=function(e,t){return{type:"TOGGLE-FOLLOWING-PROGRESS",isFollowingProgress:e,id:t}},g=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(h(!1)),n.next=3,u.a.getUsers(e,t);case 3:c=n.sent,r(h(!0)),r(O(c.data.items));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(h(!1)),e.next=3,u.a.getCount();case 3:n=e.sent,t(b(n.data.totalCount)),t(h(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(p(!0,e)),t.next=3,u.a.unfollow(e);case 3:0===t.sent.data.resultCode&&n(f(e)),n(p(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(p(!0,e)),t.next=3,u.a.follow(e);case 3:0===t.sent.data.resultCode&&n(d(e)),n(p(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},26:function(e,t,n){"use strict";var r=n(1),a=(n(0),n(53)),c=n.n(a);t.a=function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:c.a.lds_roller,children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})})}},29:function(e,t,n){e.exports={header:"Header_header__3Y5Su",login:"Header_login__2BSyI",content:"Header_content__5d2tU"}},46:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n(35),a=function(e){return e.allUsers.usersOnOnePage},c=Object(r.a)((function(e){return e.allUsers.totalUsersCount}),a,(function(e,t){for(var n=[],r=Math.ceil(e/t),a=1;a<=r;a++)n.push(a);return n})),i=function(e){return e.allUsers.usersInFollowingProgress},o=function(e){return e.allUsers.users},u=function(e){return e.allUsers.selectedPage},s=function(e){return e.allUsers.isFetching}},47:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(22),a=n(2),c=n(14),i=n.p+"static/media/Female.cd03b322.png",o={messages:[{id:1,name:"Nadezhda",content:"Hello"},{id:2,name:"Ivan",content:"Hello"},{id:3,name:"Alexey",content:"Hello"},{id:4,name:"Ekaterina",content:"Hello"}],dialog:{dialogMessages:[{name:"Nadezhda",content:"hello,friend!",photo:i},{name:"Self",content:"Hello!",photo:c.a},{name:"Nadezhda",content:"hello,friend!",photo:i},{name:"Self",content:"Hello!",photo:c.a},{name:"Nadezhda",content:"hello,friend!",photo:i},{name:"Self",content:"Hello!",photo:c.a},{name:"Nadezhda",content:"hello,friend!",photo:i},{name:"Self",content:"Hello!",photo:c.a},{name:"Nadezhda",content:"hello,friend!",photo:i},{name:"Self",content:"Hello!",photo:c.a}]}},u=function(e){return{type:"SEND-MESSAGE",messageText:e}};t.a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments.length>1?arguments[1]:void 0,i=document.querySelector(".scroll_down");switch(n.type){case"SEND-MESSAGE":(e=Object(a.a)({},t)).dialog.dialogMessages=Object(r.a)(t.dialog.dialogMessages);var u=n.messageText.trim();return u&&e.dialog.dialogMessages.push({name:"Self",content:u,photo:c.a}),setTimeout((function(){i.scrollTop=i.scrollHeight+100}),1),e;case"SCROLL-DOWN":setTimeout((function(){i.scrollTop=i.scrollHeight+100}),1);break;default:return t}}},53:function(e,t,n){e.exports={lds_roller:"Preloader_lds_roller__36G_u"}},54:function(e,t,n){e.exports={preloader:"WithSuspense_preloader__1htcf"}},59:function(e,t,n){},6:function(e,t,n){"use strict";var r=n(2),a=n(48),c=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"f3a0a3ec-dd9a-48c6-8dde-c7a136542315"}}),i={getUsers:function(e,t){return c.get("users?page=".concat(e,"&count=").concat(t))},getCount:function(){return c.get("users")},unfollow:function(e){return c.delete("follow/".concat(e))},follow:function(e){return c.post("follow/".concat(e))},getProfile:function(e){return c.get("profile/".concat(e))},authMe:function(){return c.get("auth/me")},getStatus:function(e){return c.get("profile/status/".concat(e))},setNewStatus:function(e){return c.put("profile/status",{status:e})},authLogin:function(e){return c.post("auth/login",{email:e.email,password:e.password,rememberMe:e.rememberMe})},LogOut:function(){return c.delete("auth/login")},editPage:function(e){return c.put("profile",Object(r.a)({},e))}};t.a=i},83:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),i=(n(59),function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,108)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))}),o=n(16),u=n(18),s=n(47),l=n(23),d=n(20),f=n(49),O=n(4),b=n.n(O),j=n(8),h=n(2),p={isInitialized:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE":return Object(h.a)(Object(h.a)({},e),{},{isInitialized:!0});default:return e}},m=Object(o.c)({profile:u.b,dialogs:s.a,allUsers:l.a,auth:d.b,app:g}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,x=Object(o.e)(m,v(Object(o.a)(f.a)));window.store=x;var E=x,T=n(27),S=n.n(T),F=n(51),w=n(52),P=n(56),y=n(55),L=(n(83),n(13)),N=n(5),I=n(29),_=n.n(I),C=n.p+"static/media/twitter.0efd0e85.svg",G=function(e){return Object(r.jsx)("header",{className:_.a.header,children:Object(r.jsxs)("div",{className:_.a.content,children:[Object(r.jsx)(L.b,{to:"/",children:Object(r.jsx)("img",{src:C,alt:""})}),Object(r.jsx)("div",{className:_.a.login,children:"/auth"===e.path||function(){if(e.login){if(e.isFetching)return;return Object(r.jsx)(L.b,{onClick:e.logOut,to:"/auth",children:"Log out"})}return Object(r.jsx)(L.b,{to:"/auth",children:"Login"})}()})]})})},k=n(17),A=n(19),U={getProfile:u.d,logOut:d.d},M=Object(o.d)(N.f,Object(k.b)((function(e){return{login:Object(A.e)(e),isFetching:Object(A.a)(e)}}),U))((function(e){return Object(r.jsx)(G,{logOut:e.logOut,getProfile:e.getProfile,login:e.login,path:e.location.pathname,isFetching:e.isFetching})})),z=n(15),H=n.n(z),R=function(e){return Object(r.jsx)("nav",{className:H.a.nav,children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:e.isAuthorized?Object(r.jsx)(L.b,{exact:!0,onClick:e.loadProfile,activeClassName:H.a.active,className:H.a.item,to:"/profile",children:"Profile"}):Object(r.jsx)(L.b,{to:"/auth",className:H.a.item,children:"Profile"})}),Object(r.jsx)("li",{children:Object(r.jsx)(L.b,{activeClassName:H.a.active,className:H.a.item,to:"/dialogs",children:"Messages"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{className:H.a.item,href:"#",children:"Friends"})}),Object(r.jsx)("li",{children:Object(r.jsx)(L.b,{onClick:e.toFirstPage,activeClassName:H.a.active,className:H.a.item,to:"/users",children:"Users"})})]})})},D=n(46),J={goToFirstPage:l.f,getUsers:l.e,getProfile:u.d,getStatus:u.e},W=Object(k.b)((function(e){return{id:Object(A.d)(e),isAuthorized:Object(A.b)(e),usersOnOnePage:Object(D.f)(e)}}),J)((function(e){return Object(r.jsx)(R,Object(h.a)({loadProfile:function(){e.getStatus(e.id),e.getProfile(e.id)},toFirstPage:function(){e.goToFirstPage(),e.getUsers(1,e.usersOnOnePage)}},e))})),B=n(26),Y=n(54),Z=n.n(Y),X=function(e){return function(t){return Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)("div",{className:Z.a.preloader,children:Object(r.jsx)(B.a,{})}),children:Object(r.jsx)(e,Object(h.a)({},t))})}},q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,110))})),K=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,113))})),V=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,112))})),Q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,109))})),$=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,111))})),ee=function(e){Object(P.a)(n,e);var t=Object(y.a)(n);function n(){return Object(F.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeMe()}},{key:"render",value:function(){return this.props.isInitialized?Object(r.jsxs)(L.a,{children:[Object(r.jsx)(M,{}),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(W,{}),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(N.b,{exact:!0,path:"/",render:X(Q)}),Object(r.jsx)(N.b,{path:"/profile/:id?",render:X(Q)}),Object(r.jsx)(N.b,{path:"/dialogs",render:X(q)}),Object(r.jsx)(N.b,{path:"/users",render:X(V)}),Object(r.jsx)(N.b,{path:"/auth",render:X($)}),Object(r.jsx)(N.b,{path:"/edit",render:X(K)})]})]})]}):Object(r.jsx)("div",{className:"preloader",children:Object(r.jsx)(B.a,{})})}}]),n}(a.Component),te=Object(k.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializeMe:function(){return function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(d.a)());case 2:t({type:"INITIALIZE"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ee);S.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(k.a,{store:E,children:Object(r.jsx)(te,{})})}),document.getElementById("root")),i()}},[[88,2,3]]]);
//# sourceMappingURL=main.8b8dbb02.chunk.js.map